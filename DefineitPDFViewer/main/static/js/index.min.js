var __PDF_DOC,__CURRENT_PAGE,__TOTAL_PAGES,__PAGE_RENDERING_IN_PROGRESS=0,TEXT_LAYER_HAS_RENDERED=!1,__CANVAS=$("#pdf-canvas").get(0),__CANVAS_CTX=__CANVAS.getContext("2d");function determine(t){const e=Math.floor(Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2),o=t.clientX;return o>e?"left":o==e?"top":"right"}function get_definition_of_clicked_word(){$("#text-layer").off().on("click",function(t){if("SPAN"==t.target.nodeName)if($(function(){$(t.target).popover({html:!0,trigger:"click",delay:{show:"500",hide:"100"}}).popover("show")}),"getting definition...."==t.target.getAttribute("data-content")){get_definition_from_lexicala(t.target.textContent.toLowerCase()).then(function(e){if(0!=e){data_content="";for(let t=0;t<e.length;t++)text="",title=e[t].word,type=e[t].type,definitions=e[t].definitions_array,definitions_in_text=[],definitions.forEach(function(t){definitions_in_text+="-"+t.trim()+"<br/>"}),text=`${t+1}-<strong>${title}</strong> <i>${type}</i><br/>${definitions_in_text}`,data_content+=text+"<br/>";t.target.setAttribute("data-content",data_content),t.target.setAttribute("data-original-title",t.target.textContent),t.target.setAttribute("data-placement",determine(t))}else t.target.setAttribute("data-placement",determine(t)),t.target.setAttribute("data-content","no definition for that word was found");$(function(){$(t.target).popover({html:!0,trigger:"click",delay:{show:"500",hide:"100"}}).popover("show")})})}else $(function(){$(t.target).popover({html:!0,trigger:"click",delay:{show:"500",hide:"100"}}).popover("show")})})}function get_definition_from_lexicala(t){h=new Headers;let e=window.btoa("namangala:ilovecoding1@");return h.append("Authorization","Basic "+e),fetch(`https://dictapi.lexicala.com/search?source=global&language=en&text=${t}&morph=true`,{method:"GET",headers:h}).then(function(t){return t.json()}).then(function(t){if(t.results.length>0){all_words=[];for(let e=0;e<t.results.length;e++){let o=t.results[e].headword.text,n=t.results[e].headword.pos,i=[];t.results[e].senses.forEach(function(t){void 0!==t.definition&&i.push(t.definition)});let a={word:o,type:n,definitions_array:i};all_words.push(a)}return all_words}return all_words=!1,all_words})}function make_words_clickable(){let t=document.getElementById("text-layer").children;for(let e=0;e<t.length;e++)"SPAN"!=t[e].nodeName&&(t[e].innerHTML=t[e].textContent.replace(/(\w+)/g,"<span  class='word' data-html='true' data-content='getting definition....' data-toggle='popover' >$1</span>"));get_definition_of_clicked_word(),$(function(){$('[data-toggle="popover"]').popover({trigger:"click",delay:{show:"500",hide:"100"}})})}function showPDF(t){$("#pdf-loader").show(),PDFJS.getDocument({url:t}).then(function(t){__TOTAL_PAGES=(__PDF_DOC=t).numPages,$("#pdf-loader").hide(),$("#pdf-contents").show(),$("#pdf-total-pages, #pdf-total-pages-bottom").text(__TOTAL_PAGES),showPage(1),$("#pdf-prev").css("opacity","0.2")}).catch(function(t){$("#pdf-loader").hide(),$("#upload-button").show(),alert(t.message)})}function showPage(t){__PAGE_RENDERING_IN_PROGRESS=1,__CURRENT_PAGE=t,$("#pdf-next, #pdf-prev, #pdf-next-bottom, #pdf-prev-bottom").attr("disabled","disabled"),$("#pdf-canvas").hide(),$("#page-loader").show(),$("#pdf-current-page, #pdf-current-page-bottom").text(t),__PDF_DOC.getPage(t).then(function(e){__CANVAS.width=Math.floor(Math.max(document.documentElement.clientWidth,window.innerWidth||0)),__CANVAS.width>992&&(__CANVAS.width=992);var o=__CANVAS.width/e.getViewport(1).width,n=e.getViewport(o);__CANVAS.height=n.height;var i={canvasContext:__CANVAS_CTX,viewport:n};e.render(i).then(function(){return 0==(__PAGE_RENDERING_IN_PROGRESS=0)&&setTimeout(make_words_clickable,5e3),t!=__TOTAL_PAGES?$("#pdf-next, #pdf-next-bottom").removeAttr("disabled").css("opacity","1"):$("#pdf-next, #pdf-next-bottom").attr("disabled",!0).css("opacity","0.3"),1!=t?$("#pdf-prev, #pdf-prev-bottom").removeAttr("disabled").css("opacity","1"):$("#pdf-prev, #pdf-prev-bottom").attr("disabled",!0).css("opacity","0.3"),$("#pdf-canvas").show(),$("#search-text").show(),$("#page-loader").hide(),e.getTextContent()}).then(function(t){var e=$("#pdf-canvas").offset();$("#text-layer").html(""),$("#text-layer").css({left:e.left+"px",top:e.top+"px",height:__CANVAS.height+"px",width:__CANVAS.width+"px"}),PDFJS.renderTextLayer({textContent:t,container:$("#text-layer").get(0),viewport:n,textDivs:[]})})})}$("#upload-button").on("click",function(){$("#file-to-upload").trigger("click")}),$("#upload-btn").on("click",function(){$("#file-to-upload").trigger("click")}),$("#file-to-upload").on("change",function(){-1!=["application/pdf"].indexOf($("#file-to-upload").get(0).files[0].type)?($("#upload-button").hide(),$(".hide-in-view").each(function(){$(this).hide()}),showPDF(URL.createObjectURL($("#file-to-upload").get(0).files[0]))):alert("Error : Not a PDF")}),$("#pdf-prev, #pdf-prev-bottom").on("click",function(){1!=__CURRENT_PAGE&&showPage(--__CURRENT_PAGE)}),$("#pdf-next, #pdf-next-bottom").on("click",function(){__CURRENT_PAGE!=__TOTAL_PAGES&&showPage(++__CURRENT_PAGE)}),$("body").on("click",function(t){$('[data-toggle="popover"]').each(function(){$(this).is(t.target)||0!==$(this).has(t.target).length||0!==$(".popover").has(t.target).length||$(this).popover("hide")})}),$("#search-text").on("keyup",function(){text=$(this).val(),$("#text-layer > div > span").removeClass("highlight"),""!=jQuery.trim(text)&&$("#text-layer > div > span:contains("+text+")").addClass("highlight")});let date=(new Date).getFullYear();$("#footer-info").html("&copy;Copyright DefineIt "+date);